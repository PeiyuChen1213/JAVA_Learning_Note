## 汇编代码简要总结

## Load and Store 指令

指令的格式：

![image-20230516103428176](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516103428176.png)

所有数据类型：

word(32 bit) ,half(16 bit), byte(8bit) imm(立即数) asciiz(字符串类型)

所以就有：

```assembly
li $t0, 27  #立即数
sw $t0, num # num = 27
lw $t0, wnum # load word
sw $t0, wans # wans = wnum
lh $t1, hnum
sh $t1, hans # hans = hnum
```

## Move指令的使用（只使用再register to register当中）

基本的指令格式：

![image-20230516104242035](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516104242035.png)

例如：

```assembly
li $t0,42 # load the immediate 
move $t1,$t0 # 将t0的值移动到t1
```

## 数学运算指令

指令大致如下：

![image-20230516104703991](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516104703991.png)

![image-20230516104711551](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516104711551.png)

大多数指令就是汇编指令，其中比较重要的是后缀带有u的是代表unsigned

带有o的是overflow

其中乘除有两个参数的API 这个时候要注意dest就是hi和lo

### 一个数学的例子

$$
volume = aSide∗bSide∗cSide
$$

$$
surfaceArea = 2( aSide∗bSide + aSide∗cSide + bSide∗cSide)
$$

一个完整的汇编代码的结构：

1. 数据段

   ```assembly
   # Data Declarations
   .data
   aSide: .word 73
   bSide: .word 14
   cSide: .word 16
   volume: .word 0
   surfaceArea: .word 0
   ```

2. 代码段

   ```assembly
   .text
   .globl main
   main:
   #在这边写你的主要代码
   	li $v0, 10
   	syscall 
   .end main
   ```

3. 完整的代码模板

   ```assembly
   # Name and general description of program
   # ----------------------------------------
   # Data declarations go in this section.
   .data
   # program specific data declarations
   # ----------------------------------------
   # Program code goes in this section.
   .text
   .globl main
   .ent main
   main:
   # -----
   # your program code goes here.
   # -----
   # Done, terminate program.
   li $v0, 10
   syscall # all done!
   .end main
   ```



## 程序控制指令(类似IF ELSE)

### 无条件程序控制指令：

![image-20230516111331091](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516111331091.png)

### 有条件程序控制指令：

![image-20230516111508600](C:\Users\29844\AppData\Roaming\Typora\typora-user-images\image-20230516111508600.png)

还有一个判断是不是0的指令 bnez，如果不是0就跳转到对应的label当中

### 计算1-10的平方和

```assembly
# Example program to compute the sum of squares.
# -----------------------------------------------------
# Data Declarations
.data
n: .word 10
sumOfSquares: .word 0
# -----------------------------------------------------
# text/code section
.text
.globl main
main:
# -----
# Compute sum of squares from 1 to n.
lw $t0, n #
li $t1, 1 # loop index (1 to n)
li $t2, 0 # sum
sumLoop:
mul $t3, $t1, $t1 # index^2
add $t2, $t2, $t3
add $t1, $t1, 1
ble $t1, $t0, sumLoop
sw $t2, sumOfSquares
# -----
# Done, terminate program.
li $v0, 10 # call code for terminate
syscall # system call
.end main
```

